<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:b="http://bootsfaces.net/ui"
                xmlns:o="http://omnifaces.org/ui"
                template="./../layout/skeleton.xhtml">

    <ui:define name="title">
        Forschungskolloquien - IWIQA
    </ui:define>

    <ui:define name="content">
        <b:row>
            <b:column span="12">
                <h3>Verfügbare Forschungskolloquien</h3>
                <b:panel rendered="#{empty sfokoBean.availableFoKos}">
                    <h:outputText value="Momentan sind keine Forschungskolloquien verfügbar"/>
                </b:panel>
                <b:panel rendered="#{not empty sfokoBean.availableFoKos}">
                    <h:form id="fokoForm" prependId="false">
                        <h:dataTable id="fokoTable" value="#{sfokoBean.availableFoKos}" var="foko" styleClass="table" style="margin-bottom: 0">
                            <h:column>
                                <f:facet name="header">Von</f:facet>
                                <h:outputText value="#{foko.startingDate.time}">
                                    <f:convertDateTime pattern="dd.MM.yyyy hh:mm"/>
                                </h:outputText>
                            </h:column>
                            <h:column>
                                <f:facet name="header">Bis</f:facet>
                                <h:outputText value="#{foko.endingDate.time}">
                                    <f:convertDateTime pattern="dd.MM.yyyy hh:mm"/>
                                </h:outputText>
                            </h:column>
                            <h:column>
                                <f:facet name="header">Raum</f:facet>
                                <h:outputText value="#{foko.room}"/>
                            </h:column>
                            <h:column>
                                <f:facet name="header">Angemeldet</f:facet>
                                <b:icon rendered="#{sfokoBean.hasRegisteredForFoKo(foko)}" name="check"/>
                            </h:column>
                            <h:column>
                                <f:facet name="header"></f:facet>
                                <b:commandButton rendered="#{not sfokoBean.hasRegisteredForFoKo(foko)}" value="Anmelden" size="xs" ajax="true" onclick="ajax:sfokoBean.setSelectedFoKo(foko);javascript:$('.modalPseudoClass').modal();"/>
                            </h:column>
                        </h:dataTable>
                        <b:modal id="amodal" title="Für Forschungskolloquium registrieren" styleClass="modalPseudoClass">
                            <h:outputText value="Bitte wählen Sie Ihre Qualifikationsarbeit, mit der Sie am Forschungskolloquium teilnehmen möchten." />
                            <b:selectOneMenu value="#{sfokoBean.selectedQA}" id="qa">
                                <f:selectItems value="#{sfokoBean.myQAs}" var="qa" itemLabel="#{qa.title}"/>
                            </b:selectOneMenu>
                            <f:facet name="footer">
                                <b:button value="Abbrechen" dismiss="modal" onclick="return false;"/>
                                <b:commandButton value="Registrieren" action="#{sfokoBean.registerToFoKo}" ajax="true" onclick="$('.modalPseudoClass').modal('hide')" />
                            </f:facet>
                        </b:modal>
                    </h:form>
                </b:panel>
            </b:column>
        </b:row>
    </ui:define>
    <ui:define name="sideContent">
        sideContent
    </ui:define>

</ui:composition>
